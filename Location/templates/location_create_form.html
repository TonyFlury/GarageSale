{% extends "_snap_slider_base.html" %}
{% load static %}
{% load user_management_tags %}
{% load location_tags %}

{% block head-extra %}
    <script src="{% static 'DjangoGoogleMap/api/display_location.js' %}"></script>
    <script type="text/javascript" src="{% static 'GarageSale/js/tooltip.js' %}"></script>
{% endblock %}


{% block PageStyles %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'Location/styles/locations.css' %}">
{% endblock %}

{% block sidebar %}
        <div class="sidebar entry direct tooltip" item="Homepage" xmlns="http://www.w3.org/1999/html">
            <a href="{% url 'home' %}">
                <img class="sidebar icon" alt="Home Page" id='id_home_page' src={% static "GarageSale/images/icons/menu/home-svgrepo-com.svg" %} >
                <label for="id_team">Home Page</label></a>
                <span class="tooltiptext right arrow">Return to Home Page</span>
        </div>
           <div class="sidebar entry direct tooltip" item="Back" xmlns="http://www.w3.org/1999/html">
            <a href="{% url 'Location:view' %}">
                <img class="sidebar icon" alt="Return to Previous Page" id='id_back' src={% static "GarageSale/images/icons/menu/back-svgrepo-com.svg" %} location_view.html >
                <label for="id_team">Back to Previous Page</label></a>
                <span class="tooltiptext right arrow">Return to Previous Page</span>
        </div>
{%  endblock %}

{%  block SnappableSections %}

<div class="card location">
    <h3>
        Garage Sale Location
    </h3>
    <div class="form">
    <form method=POST action='{{action}}' id="CreateLocation">
            {% csrf_token %}
            <div class="address-and-map">
                {%  if form.non_field_errors %}
                    {% for error in form.non_field_errors %}
                    <div class="error">{{ error }}</div>
                    {% endfor %}
                {% endif %}
                <div class="address">
                    {{ form.ad_board.errors }}
                    {{ form.sale_event.errors }}
                    <div>
                        <div class="field_wrapper"><label for='{{ form.ad_board.id_for_label }}' >{{ form.ad_board.label }}</label>{{ form.ad_board }}<span class="helptext">{{ form.ad_board.help_text }}</span></div>
                        <div class="field_wrapper"><label for='{{ form.sale_event.id_for_label }}' >{{ form.sale_event.label }}</label>{{ form.sale_event }}<span class="helptext">{{ form.sale_event.help_text }}</span></div>
                    </div>
                    <div>
                        <div class="field_wrapper">
                            {{ form.house_number.errors }}
                            <span class="label"><label for='{{ form.house_number.id_for_label }}' >{{ form.house_number.label }}</label></span>
                            {{ form.house_number }}{% if form.house_number.help_text %}<span class="helptext">{{ form.house_number.help_text }}</span>{%  endif %}</div>
                        <div class="field_wrapper">
                                                    {{ form.street_name.errors }}

                            <span class="label"><label for='{{ form.street_name.id_for_label }}' >{{ form.street_name.label }}</label></span>
                            {{ form.street_name }}{% if form.street_name.help_text %}<span class="helptext">{{ form.street_name.help_text }}</span>{%  endif %}</div>

                        <div class="field_wrapper">
                            {{ form.postcode.errors }}
                            <span class="label"><label for='{{ form.postcode.id_for_label }}' >{{ form.postcode.label }}</label></span>
                            {{ form.postcode }}{% if form.postcode.help_text %}<span class="helptext">{{ form.postcode.help_text }}{% endif %}</span></div>

                        <div class="field_wrapper">
                            {{ form.town.errors }}
                            <span class="label"><label for='{{ form.town.id_for_label }}' >{{ form.town.label }}</label></span>
                            {{ form.town }}{% if form.town.help_text %}<span class="helptext">{{ form.town.help_text }}{%  endif %}</span></div>
                    </div>
                </div>
               <div class="premarked-map">
                <div class="map-details">
                    {{ form.lng_lat.errors }}
                    <div class="field_wrapper">
                        <div style="font-size: 80%;">Please be aware that not all buildings appear on the roadmap version of the map, and that some
                        house numbers are incorrect - we have no control over that aspect of the map.
                        Please use the satellite view to identify your location if at all possible.
                        </div>
                        <label for='{{ form.lng_lat.id_for_label }}' >{{ form.lng_lat.label }}</label>{{ form.lng_lat }}{% if form.lng_lat.help_text %}<span class="helptext">{{ form.lng_lat.help_text | safe}}{%  endif %}</div>
                </div>
               </div>
            </div>
        <div class="buttons">
            <input type="button" name='action' onclick="cancel_LocationSave()" value="Cancel" id="id_CancelButton">
            <input type="reset" name='action' value="Reset" id="id_ResetButton">
            <input type="submit" name='action' value="Save" id="id_SaveButton">
        </div>
    </form>
    <script type="text/javascript">
        /* Implement cancel button as a simple return to the GetInvolved page */
        function cancel_LocationSave()
        {
            window.location.replace( '{% url "Location:view" %}' );
         }
    </script>
</div>
</div>
{% endblock %}